---
title: "图像处理-高斯噪声"
categories: [ "opencv" ]
tags: [ "opencv","图像处理","图像处理算法","噪声","高斯" ]
draft: false
slug: "opencv/image-processing-gaussian-noise"
date: "2019-06-28 22:03:00"
---

## 噪声
图像常常受到一些随机误差的影响而退化，我们通常称这个退化为噪声。在图像的捕获、传输或者处理过程中都有可能产生噪声，噪声可能是依赖于图像内容，可能无关。

噪声一般由其频率的特征来刻画，理想的噪声称为白噪声，高斯噪声就属于白噪声的一种，为白噪声的一个特例。服从高斯（正态）分布，在一维的情况下，概率密度函数为

![高斯分布一维概率密度.gif][1]

**加性噪声**，在图像通过信号传输的时候，产生的噪声一般与图像信号无关，这种独立于信号的退化称为加性噪声，模型表示为

![加性噪声模型.gif][2]

![产生加性零均值高斯噪声.png][3]

代码实现

~~~c++
#include<opencv2/opencv.hpp>
#include <random>



namespace mycv {
	const double pi = 3.1415926;
	void createGaussianNoise(cv::Mat& src, cv::Mat& dst)
	{
		dst = src.clone();
		//1、灰阶范围[0， G - 1], 取sigma > 0; sigma越小噪声越小
		const int G = 256;
		double sigma = 20;
	
		for(int i = 0; i < src.rows; ++i)
			for (int j = 0; j < src.cols - 1; ++j)
			{
				//2、产生位于[0, 1]独立随机数gamma、phi
				std::random_device rd;
				std::mt19937 gen(rd());
				double gamma = std::generate_canonical<double, 2>(gen);
				double phi = std::generate_canonical<double, 2>(gen);
				//3、计算z1、z2
				double z1 = sigma * std::cos(2 * pi*phi)*std::sqrt(-2 * std::log(gamma));
				double z2 = sigma * std::sin(2 * pi*phi)*std::sqrt(-2 * std::log(gamma));
				//4、
				double tmpxy = src.at<uchar>(i, j) + z1;
				double tmpxy1 = src.at<uchar>(i, j + 1) + z2;

				//5
				if (tmpxy < 0)
					dst.at<uchar>(i, j) = 0;
				else if (tmpxy > G - 1)
					dst.at<uchar>(i, j) = G - 1;
				else
					dst.at<uchar>(i, j) = static_cast<int>(tmpxy);

				
				if (tmpxy1 < 0)
					dst.at<uchar>(i, j + 1) = 0;
				else if (tmpxy > G - 1)
					dst.at<uchar>(i, j + 1) = G - 1;
				else
					dst.at<uchar>(i, j + 1) = static_cast<int>(tmpxy1);

			}

	}
}//mycv

int main(void)
{
	cv::Mat src = cv::imread("lena.jpg", 0);
	if (src.empty()) return -1;

	cv::Mat dst;
	mycv::createGaussianNoise(src, dst);
	cv::imshow("src", src);
	cv::imshow("dst", dst);

	cv::waitKey(0);
	return 0;
}//main
~~~

![sigma = 20噪声效果.png][4]

---

本文由芒果浩明发布，转载请注明来源。
本文链接：https://blog.mangoroom.cn/opencv/image-processing-gaussian-noise.html


  [1]: https://mangoroom.cn/usr/uploads/2019/06/3567936818.gif
  [2]: https://mangoroom.cn/usr/uploads/2019/06/2761109556.gif
  [3]: https://mangoroom.cn/usr/uploads/2019/06/360464662.png
  [4]: https://mangoroom.cn/usr/uploads/2019/06/3676585244.png